.TH "src/ckb/fwupgradedialog.cpp" 3 "Sun Jun 4 2017" "Version beta-v0.2.8+testing at branch all-mine" "ckb-next" \" -*- nroff -*-
.ad l
.nh
.SH NAME
src/ckb/fwupgradedialog.cpp \- 
.SH SYNOPSIS
.br
.PP
\fC#include <QDir>\fP
.br
\fC#include <QMessageBox>\fP
.br
\fC#include 'fwupgradedialog\&.h'\fP
.br
\fC#include 'kbfirmware\&.h'\fP
.br
\fC#include 'ui_fwupgradedialog\&.h'\fP
.br

.SS "Data Structures"

.in +1c
.ti -1c
.RI "struct \fBKbId\fP"
.br
.RI "\fIIDs for verifying firmware suitability Some newer hardware models have the same features as older ones, but need a different firmware version number but not a different firmware file\&. \fP"
.in -1c
.SS "Functions"

.in +1c
.ti -1c
.RI "static const int \fBDIALOG_HEIGHT_MAX\fP (240)"
.br
.ti -1c
.RI "static float \fBverifyFw\fP (const QByteArray &blob, const short productID)"
.br
.in -1c
.SS "Variables"

.in +1c
.ti -1c
.RI "static const int \fBDIALOG_WIDTH\fP = 420"
.br
.ti -1c
.RI "static const int \fBDIALOG_HEIGHT_MIN\fP = 200"
.br
.in -1c
.SH "Data Structure Documentation"
.PP 
.SH "struct KbId"
.PP 
Definition at line 10 of file fwupgradedialog\&.cpp\&.
.PP
\fBData Fields:\fP
.RS 4
const char * \fIfeature\fP 
.br
.PP
short \fIproduct\fP 
.br
.PP
short \fIvendor\fP 
.br
.PP
.RE
.PP
.SH "Function Documentation"
.PP 
.SS "static const int DIALOG_HEIGHT_MAX (240)\fC [static]\fP"

.PP
Referenced by FwUpgradeDialog::exec()\&.
.SS "static float verifyFw (const QByteArray &blob, const shortproductID)\fC [static]\fP"
< Corsair has at the moment just one vendorID
.PP
< Something really bad has happened - wrong firmware file detected\&. 
.PP
Definition at line 73 of file fwupgradedialog\&.cpp\&.
.PP
Referenced by FwUpgradeDialog::exec()\&.
.PP
.nf
73                                                                      {
74     short vendor = 0x1b1c;      
75     if(blob\&.length() < 0x0108)
76         return 0\&.f;
77     const char* bData = blob\&.data();
78     // Make sure it matches this device based on the vendor and product IDs embedded in the blob
79 
80     if (memcmp(&vendor, bData + 0x102, 2) || memcmp(&productID, bData + 0x104, 2)) {
81         qCritical() << "Something really bad happened - wrong firmware file detected";
82         return 0\&.f; 
83     }
84 
85     // Copy the version from the blob
86     short version;
87     memcpy(&version, bData + 0x106, 2);
88     // Un-hexify it
89     return QString::number(version, 16)\&.toFloat() / 100\&.f;
90 }
.fi
.SH "Variable Documentation"
.PP 
.SS "const int DIALOG_HEIGHT_MIN = 200\fC [static]\fP"

.PP
Definition at line 17 of file fwupgradedialog\&.cpp\&.
.PP
Referenced by FwUpgradeDialog::FwUpgradeDialog(), and FwUpgradeDialog::on_actionButton_clicked()\&.
.SS "const int DIALOG_WIDTH = 420\fC [static]\fP"

.PP
Definition at line 16 of file fwupgradedialog\&.cpp\&.
.PP
Referenced by FwUpgradeDialog::exec(), FwUpgradeDialog::FwUpgradeDialog(), and FwUpgradeDialog::on_actionButton_clicked()\&.
.SH "Author"
.PP 
Generated automatically by Doxygen for ckb-next from the source code\&.

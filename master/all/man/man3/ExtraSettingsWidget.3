.TH "ExtraSettingsWidget" 3 "Wed May 24 2017" "Version v0.2.8 at branch master" "ckb-next" \" -*- nroff -*-
.ad l
.nh
.SH NAME
ExtraSettingsWidget \- 
.SH SYNOPSIS
.br
.PP
.PP
\fC#include <src/ckb/extrasettingswidget\&.h>\fP
.PP
Inherits \fBQDialog\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBExtraSettingsWidget\fP (\fBQWidget\fP *parent=0)"
.br
.ti -1c
.RI "\fB~ExtraSettingsWidget\fP ()"
.br
.ti -1c
.RI "void \fBpollUpdates\fP ()"
.br
.in -1c
.SS "Private Slots"

.in +1c
.ti -1c
.RI "void \fBon_trayBox_clicked\fP (bool checked)"
.br
.ti -1c
.RI "void \fBon_brightnessBox_clicked\fP (bool checked)"
.br
.ti -1c
.RI "void \fBon_animScanButton_clicked\fP ()"
.br
.ti -1c
.RI "void \fBon_fpsBox_valueChanged\fP (int arg1)"
.br
.ti -1c
.RI "void \fBon_ditherBox_clicked\fP (bool checked)"
.br
.ti -1c
.RI "void \fBon_mAccelBox_clicked\fP (bool checked)"
.br
.ti -1c
.RI "void \fBon_sAccelBox_clicked\fP (bool checked)"
.br
.ti -1c
.RI "void \fBon_sSpeedBox_valueChanged\fP (int arg1)"
.br
.ti -1c
.RI "void \fBon_delayBox_clicked\fP (bool checked)"
.br
.in -1c
.SS "Private Attributes"

.in +1c
.ti -1c
.RI "\fBUi::ExtraSettingsWidget\fP * \fBui\fP"
.br
.in -1c
.SH "Detailed Description"
.PP 
Definition at line 10 of file extrasettingswidget\&.h\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "ExtraSettingsWidget::ExtraSettingsWidget (\fBQWidget\fP *parent = \fC0\fP)\fC [explicit]\fP"
Read Macro Delay setting, update UI and Kb-internal flag 
.PP
Definition at line 10 of file extrasettingswidget\&.cpp\&.
.PP
References Ui_ExtraSettingsWidget::animPathLabel, Ui_ExtraSettingsWidget::brightnessBox, Ui_ExtraSettingsWidget::delayBox, Kb::dither(), Ui_ExtraSettingsWidget::ditherBox, Ui_ExtraSettingsWidget::fpsBox, Ui_ExtraSettingsWidget::fpsWarnLabel, Kb::frameRate(), lastSharedDimming, Ui_ExtraSettingsWidget::mAccelBox, Kb::macroDelay(), KbLight::MAX_DIM, Kb::mouseAccel(), on_animScanButton_clicked(), Ui_ExtraSettingsWidget::osxLabel, Ui_ExtraSettingsWidget::osxLine, AnimScript::path(), Ui_ExtraSettingsWidget::sAccelBox, Kb::scrollSpeed(), Ui_ExtraSettingsWidget::setupUi(), KbLight::shareDimming(), Ui_ExtraSettingsWidget::sSpeedBox, Ui_ExtraSettingsWidget::sSpeedWidget, Ui_ExtraSettingsWidget::trayBox, ui, and CkbSettings::value()\&.
.PP
.nf
10                                                         :
11     QDialog(parent),
12     ui(new Ui::ExtraSettingsWidget)
13 {
14     ui->setupUi(this);
15     CkbSettings settings("Program");
16 
17     // Read frame rate from settings
18     int rate = settings\&.value("framerate")\&.toInt();
19     if(rate <= 0 || rate > 60)
20         rate = 30;
21     ui->fpsBox->setValue(rate);
22     Kb::frameRate(rate);
23     ui->fpsWarnLabel->setVisible(rate > 30);
24 
25     // Read global brightness setting (default = on, 100% brightness)
26     int dimming = settings\&.value("GlobalBrightness")\&.toInt();
27     if(dimming < -1 || dimming > KbLight::MAX_DIM)
28         dimming = 0;
29     lastSharedDimming = dimming;
30     KbLight::shareDimming(dimming);
31     // Set checkbox value (-1 = don't share)
32     ui->brightnessBox->setChecked(dimming == -1);
33 
34     // Read dither
35     bool dither = settings\&.value("Dither")\&.toBool();
36     Kb::dither(dither);
37     ui->ditherBox->setChecked(dither);
38 
39 #ifdef Q_OS_MACX
40     // Read OSX settings
41     bool noAccel = settings\&.value("DisableMouseAccel")\&.toBool();
42     Kb::mouseAccel(!noAccel);
43     ui->mAccelBox->setChecked(noAccel);
44     bool noScrollAccel = settings\&.value("DisableScrollAccel")\&.toBool();
45     int scrollSpeed = settings\&.value("ScrollSpeed", 3)\&.toInt();
46     ui->sAccelBox->setChecked(noScrollAccel);
47     ui->sSpeedBox->setValue(scrollSpeed);
48     Kb::scrollSpeed(noScrollAccel ? scrollSpeed : 0);
49     if(!noScrollAccel)
50         ui->sSpeedWidget->hide();
51 #else
52     // Hide all OSX options on Linux
53     ui->osxLabel->hide();
54     ui->osxLine->hide();
55     ui->mAccelBox->hide();
56     ui->sAccelBox->hide();
57     ui->sSpeedWidget->hide();
58 #endif
59 
60     // Read tray icon setting
61     ui->trayBox->setChecked(settings\&.value("SuppressTrayIcon")\&.toBool());
62 
63     // Update animation info
64     ui->animPathLabel->setText(AnimScript::path());
65     on_animScanButton_clicked();
66 
68     bool macroDelay = settings\&.value("MacroDelay")\&.toBool();
69     Kb::macroDelay(macroDelay);
70     ui->delayBox->setChecked(macroDelay);
71 }
.fi
.SS "ExtraSettingsWidget::~ExtraSettingsWidget ()"

.PP
Definition at line 73 of file extrasettingswidget\&.cpp\&.
.PP
References ui\&.
.PP
.nf
73                                          {
74     delete ui;
75 }
.fi
.SH "Member Function Documentation"
.PP 
.SS "void ExtraSettingsWidget::on_animScanButton_clicked ()\fC [private]\fP, \fC [slot]\fP"

.PP
Definition at line 87 of file extrasettingswidget\&.cpp\&.
.PP
References Ui_ExtraSettingsWidget::animCountLabel, AnimScript::count(), AnimScript::scan(), and ui\&.
.PP
Referenced by ExtraSettingsWidget()\&.
.PP
.nf
87                                                    {
88     AnimScript::scan();
89     int count = AnimScript::count();
90     if(count == 0)
91         ui->animCountLabel->setText("No animations found");
92     else if(count == 1)
93         ui->animCountLabel->setText("1 animation found");
94     else
95         ui->animCountLabel->setText(QString("%1 animations found")\&.arg(count));
96 }
.fi
.SS "void ExtraSettingsWidget::on_brightnessBox_clicked (boolchecked)\fC [private]\fP, \fC [slot]\fP"

.PP
Definition at line 82 of file extrasettingswidget\&.cpp\&.
.PP
References pollUpdates(), and KbLight::shareDimming()\&.
.PP
.nf
82                                                               {
83     KbLight::shareDimming(checked ? -1 : 0);
84     pollUpdates();
85 }
.fi
.SS "void ExtraSettingsWidget::on_delayBox_clicked (boolchecked)\fC [private]\fP, \fC [slot]\fP"

.PP
Definition at line 143 of file extrasettingswidget\&.cpp\&.
.PP
References Kb::macroDelay(), and CkbSettings::set()\&.
.PP
.nf
143                                                           {
144     CkbSettings::set("Program/MacroDelay", checked);
145     Kb::macroDelay(checked);
146 }
.fi
.SS "void ExtraSettingsWidget::on_ditherBox_clicked (boolchecked)\fC [private]\fP, \fC [slot]\fP"

.PP
Definition at line 110 of file extrasettingswidget\&.cpp\&.
.PP
References Kb::dither(), and CkbSettings::set()\&.
.PP
.nf
110                                                           {
111     CkbSettings::set("Program/Dither", checked);
112     Kb::dither(checked);
113 }
.fi
.SS "void ExtraSettingsWidget::on_fpsBox_valueChanged (intarg1)\fC [private]\fP, \fC [slot]\fP"

.PP
Definition at line 98 of file extrasettingswidget\&.cpp\&.
.PP
References Ui_ExtraSettingsWidget::fpsWarnLabel, Kb::frameRate(), CkbSettings::setValue(), and ui\&.
.PP
.nf
98                                                         {
99     // Set FPS
100     CkbSettings settings("Program");
101     settings\&.setValue("framerate", arg1);
102     Kb::frameRate(arg1);
103     // Show warning label if FPS is above 30
104     if(arg1 > 30)
105         ui->fpsWarnLabel->show();
106     else
107         ui->fpsWarnLabel->hide();
108 }
.fi
.SS "void ExtraSettingsWidget::on_mAccelBox_clicked (boolchecked)\fC [private]\fP, \fC [slot]\fP"

.PP
Definition at line 124 of file extrasettingswidget\&.cpp\&.
.PP
References Kb::mouseAccel(), and CkbSettings::set()\&.
.PP
.nf
124                                                           {
125     CkbSettings::set("Program/DisableMouseAccel", checked);
126     Kb::mouseAccel(!checked);
127 }
.fi
.SS "void ExtraSettingsWidget::on_sAccelBox_clicked (boolchecked)\fC [private]\fP, \fC [slot]\fP"

.PP
Definition at line 129 of file extrasettingswidget\&.cpp\&.
.PP
References Kb::scrollSpeed(), CkbSettings::set(), Ui_ExtraSettingsWidget::sSpeedBox, Ui_ExtraSettingsWidget::sSpeedWidget, and ui\&.
.PP
.nf
129                                                           {
130     CkbSettings::set("Program/DisableScrollAccel", checked);
131     Kb::scrollSpeed(checked ? ui->sSpeedBox->value() : 0);
132     if(checked)
133         ui->sSpeedWidget->show();
134     else
135         ui->sSpeedWidget->hide();
136 }
.fi
.SS "void ExtraSettingsWidget::on_sSpeedBox_valueChanged (intarg1)\fC [private]\fP, \fC [slot]\fP"

.PP
Definition at line 138 of file extrasettingswidget\&.cpp\&.
.PP
References Ui_ExtraSettingsWidget::sAccelBox, Kb::scrollSpeed(), CkbSettings::set(), and ui\&.
.PP
.nf
138                                                            {
139     CkbSettings::set("Program/ScrollSpeed", arg1);
140     Kb::scrollSpeed(ui->sAccelBox->isChecked() ? arg1 : 0);
141 }
.fi
.SS "void ExtraSettingsWidget::on_trayBox_clicked (boolchecked)\fC [private]\fP, \fC [slot]\fP"

.PP
Definition at line 77 of file extrasettingswidget\&.cpp\&.
.PP
References MainWindow::mainWindow, CkbSettings::set(), and MainWindow::toggleTrayIcon()\&.
.PP
.nf
77                                                         {
78     CkbSettings::set("Program/SuppressTrayIcon", checked);
79     MainWindow::mainWindow->toggleTrayIcon(!checked);
80 }
.fi
.SS "void ExtraSettingsWidget::pollUpdates ()"

.PP
Definition at line 115 of file extrasettingswidget\&.cpp\&.
.PP
References CkbSettings::isBusy(), lastSharedDimming, CkbSettings::set(), and KbLight::shareDimming()\&.
.PP
Referenced by on_brightnessBox_clicked(), and SettingsWidget::pollUpdates()\&.
.PP
.nf
115                                      {
116     // Check for changes to shared brightness setting
117     int dimming = KbLight::shareDimming();
118     if(dimming != lastSharedDimming && !CkbSettings::isBusy()){
119         CkbSettings::set("Program/GlobalBrightness", dimming);
120         lastSharedDimming = dimming;
121     }
122 }
.fi
.SH "Field Documentation"
.PP 
.SS "\fBUi::ExtraSettingsWidget\fP* ExtraSettingsWidget::ui\fC [private]\fP"

.PP
Definition at line 33 of file extrasettingswidget\&.h\&.
.PP
Referenced by ExtraSettingsWidget(), on_animScanButton_clicked(), on_fpsBox_valueChanged(), on_sAccelBox_clicked(), on_sSpeedBox_valueChanged(), and ~ExtraSettingsWidget()\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for ckb-next from the source code\&.
